\documentclass{article}
\usepackage{geometry}
\geometry{a4paper, margin=1in}
\usepackage{graphicx}
\usepackage[colorlinks=true, linkcolor=blue, citecolor=blue, urlcolor=blue]{hyperref}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{enumitem}
\usepackage{float}
\usepackage[most]{tcolorbox}

\lstset{
    basicstyle=\ttfamily\footnotesize\selectfont, % use the selected monospaced font
    backgroundcolor=\color{white},
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    Numbers=left,
    Numberstyle=\tiny\color{gray},
    stepNumber=1,
    Numbersep=10pt,
    frame=single,
    breaklines=true,
    captionpos=b,
    tabsize=4
}
\definecolor{myred}{RGB}{200, 0, 0}
\lstdefinestyle{highlightstyle}{
    basicstyle=\ttfamily\footnotesize\selectfont, % Monospace font
    backgroundcolor=\color{white},
    keywordstyle=\color{blue},
    commentstyle=\color{gray},
    stringstyle=\color{red},
    Numbers=left,
    Numberstyle=\tiny\color{gray},
    stepNumber=1,
    Numbersep=10pt,
    frame=single,
    breaklines=true,
    captionpos=b,
    tabsize=4,
    moredelim=**[is][\color{myred}]{@@}{@@},  % Highlight text between @...@
    moredelim=**[is][\color{blue}]{**}{**}  % Highlight text between @...@
}
\newtcblisting{hexlsting}{
    blank,
    listing only,
    listing options={style=highlightstyle}
}

\title{Assignment 0}
\author{
    [Welby Seely] \\
    \texttt{[wseely@emich.edu]}
}
\date{\today}

\begin{document}

    \maketitle
    \section{Print the 512-byte bootstrap sector then explain meaningful bytes}\label{sec:bootstrap}
    \begin{hexlsting}
        00000000  @@eb 3c 90@@ **4d 53 44 4f 53  35 2e 30** @@00 02@@ **01** @@01 00@@  |.<.MSDOS5.0.....|
        00000010  **02** @@e0 00@@ **40 0b** @@f0@@ **09 00**  @@12 00@@ **02 00** @@00 00@@ 00 00  |...@............|
        00000020  00 00 00 00 00 00 29 e3  18 05 35 42 4f 4f 54 35  |......)...5BOOT5|
        00000030  30 30 20 20 20 20 46 41  54 31 32 20 20 20 fa 33  |00    FAT12   .3|
        00000040  c0 8e d0 bc 00 7c 16 07  bb 78 00 36 c5 37 1e 56  |.....|...x.6.7.V|
        00000050  16 53 bf 3e 7c b9 0b 00  fc f3 a4 06 1f c6 45 fe  |.S.>|.........E.|
        00000060  0f 8b 0e 18 7c 88 4d f9  89 47 02 c7 07 3e 7c fb  |....|.M..G...>|.|
        00000070  cd 13 72 79 33 c0 39 06  13 7c 74 08 8b 0e 13 7c  |..ry3.9..|t....||
        00000080  89 0e 20 7c a0 10 7c f7  26 16 7c 03 06 1c 7c 13  |.. |..|.&.|...|.|
        00000090  16 1e 7c 03 06 0e 7c 83  d2 00 a3 50 7c 89 16 52  |..|...|....P|..R|
        000000a0  7c a3 49 7c 89 16 4b 7c  b8 20 00 f7 26 11 7c 8b  ||.I|..K|. ..&.|.|
        000000b0  1e 0b 7c 03 c3 48 f7 f3  01 06 49 7c 83 16 4b 7c  |..|..H....I|..K||
        000000c0  00 bb 00 05 8b 16 52 7c  a1 50 7c e8 92 00 72 1d  |......R|.P|...r.|
        000000d0  b0 01 e8 ac 00 72 16 8b  fb b9 0b 00 be e6 7d f3  |.....r........}.|
        000000e0  a6 75 0a 8d 7f 20 b9 0b  00 f3 a6 74 18 be 9e 7d  |.u... .....t...}|
        000000f0  e8 5f 00 33 c0 cd 16 5e  1f 8f 04 8f 44 02 cd 19  |._.3...^....D...|
        00000100  58 58 58 eb e8 8b 47 1a  48 48 8a 1e 0d 7c 32 ff  |XXX...G.HH...|2.|
        00000110  f7 e3 03 06 49 7c 13 16  4b 7c bb 00 07 b9 03 00  |....I|..K|......|
        00000120  50 52 51 e8 3a 00 72 d8  b0 01 e8 54 00 59 5a 58  |PRQ.:.r....T.YZX|
        00000130  72 bb 05 01 00 83 d2 00  03 1e 0b 7c e2 e2 8a 2e  |r..........|....|
        00000140  15 7c 8a 16 24 7c 8b 1e  49 7c a1 4b 7c ea 00 00  |.|..$|..I|.K|...|
        00000150  70 00 ac 0a c0 74 29 b4  0e bb 07 00 cd 10 eb f2  |p....t).........|
        00000160  3b 16 18 7c 73 19 f7 36  18 7c fe c2 88 16 4f 7c  |;..|s..6.|....O||
        00000170  33 d2 f7 36 1a 7c 88 16  25 7c a3 4d 7c f8 c3 f9  |3..6.|..%|.M|...|
        00000180  c3 b4 02 8b 16 4d 7c b1  06 d2 e6 0a 36 4f 7c 8b  |.....M|.....6O|.|
        00000190  ca 86 e9 8a 16 24 7c 8a  36 25 7c cd 13 c3 0d 0a  |.....$|.6%|.....|
        000001a0  4e 6f 6e 2d 53 79 73 74  65 6d 20 64 69 73 6b 20  |Non-System disk |
        000001b0  6f 72 20 64 69 73 6b 20  65 72 72 6f 72 0d 0a 52  |or disk error..R|
        000001c0  65 70 6c 61 63 65 20 61  6e 64 20 70 72 65 73 73  |eplace and press|
        000001d0  20 61 6e 79 20 6b 65 79  20 77 68 65 6e 20 72 65  | any key when re|
        000001e0  61 64 79 0d 0a 00 49 4f  20 20 20 20 20 20 53 59  |ady...IO      SY|
        000001f0  53 4d 53 44 4f 53 20 20  20 53 59 53 00 00 @@55 aa@@  |SMSDOS   SYS..U.|
    \end{hexlsting}

    \clearpage

    \begin{table}[h]
        \centering
        \begin{tabular}{|c|c|c|c|}
            \hline
                Byte(s) & Contents & Hex Value & Interpreted Value\\
            \hline
                0-2 & First instructions of bootstrap routine &
                    eb 3c 90 &
                    jmp 0x3c, nop \\
                3-10 & OEM name &
                    4d 53 44 4f 53 35 2e 30 &
                    MSDOS5.0 \\
                11-12 & Number of bytes per sector &
                     00 02 &
                     8192 bytes \\
                13 & Number of of sectors per cluster &
                    01  &
                    1 sector/cluster\\
                14-15 & Number of reserved sectors &
                    01 00 &
                    1 sector \\
                16 & Number of copies of the file allocation table &
                    02 &
                    2 copies \\
                17-18 & Number of entries in root directory &
                    e0 00 &
                    224 entries \\
                19-20 & Total Number of sectors &
                    40 0b &
                    2880 sectors \\
                21 & Media descriptor byte &
                    f0 &
                    3-1/2 Floppy (High Density) \\
                22-23 & Number of sectors in each copy of the FAT &
                    09 00 &
                    9 sectors \\
                24-25 & Number of sectors per track &
                    12 00 &
                    12 sectors per track\\
                26-27 & Number of sides &
                    02 00 &
                    2 Sides \\
                28-29 & Number of hidden sectors &
                    00 00 &
                    0 Hidden Sectors \\
            \hline
    \end{tabular}
    \caption{Bootstrap Important Bytes}
    \label{tab:basic}
    \end{table}

    \section{Verify the copy of FAT}\label{sec:verifyfat}

    First sector of the first FAT:
    \begin{hexlsting}
        00000200  f0 ff ff 03 40 00 05 60  00 07 80 00 09 a0 00 0b  |....@..`........|
        00000210  c0 00 0d e0 00 0f 00 01  11 20 01 13 40 01 15 60  |......... ..@..`|
        00000220  01 17 80 01 19 a0 01 1b  c0 01 1d e0 01 1f 00 02  |................|
        00000230  21 20 02 23 40 02 25 60  02 27 80 02 29 a0 02 2b  |! .#@.%`.'..)..+|
        00000240  c0 02 2d e0 02 2f 00 03  31 20 03 33 40 03 35 60  |..-../..1 .3@.5`|
        00000250  03 37 80 03 39 a0 03 3b  c0 03 3d e0 03 3f 00 04  |.7..9..;..=..?..|
        00000260  41 20 04 43 f0 ff 45 60  04 47 80 04 49 a0 04 4b  |A .C..E`.G..I..K|
        00000270  c0 04 4d e0 04 4f 00 05  51 20 05 53 40 05 55 60  |..M..O..Q .S@.U`|
        00000280  05 57 80 05 59 a0 05 5b  c0 05 5d e0 05 5f 00 06  |.W..Y..[..].._..|
        00000290  61 20 06 63 40 06 65 60  06 67 80 06 69 a0 06 6b  |a .c@.e`.g..i..k|
        000002a0  c0 06 6d e0 06 6f 00 07  71 20 07 73 40 07 75 60  |..m..o..q .s@.u`|
        000002b0  07 77 80 07 79 a0 07 7b  c0 07 7d e0 07 7f 00 08  |.w..y..{..}.....|
        000002c0  81 20 08 83 40 08 85 60  08 87 80 08 89 a0 08 8b  |. ..@..`........|
        000002d0  c0 08 8d f0 ff 8f 00 09  91 20 09 93 40 09 95 60  |......... ..@..`|
        000002e0  09 97 80 09 99 a0 09 9b  c0 09 9d e0 09 9f 00 0a  |................|
        000002f0  a1 20 0a a3 40 0a a5 60  0a a7 80 0a a9 a0 0a ab  |. ..@..`........|
        00000300  c0 0a ad e0 0a af 00 0b  b1 20 0b b3 40 0b b5 60  |......... ..@..`|
        00000310  0b b7 80 0b b9 a0 0b bb  c0 0b bd e0 0b bf 00 0c  |................|
        00000320  c1 20 0c c3 40 0c c5 60  0c c7 80 0c c9 a0 0c cb  |. ..@..`........|
        00000330  c0 0c cd e0 0c cf 00 0d  d1 20 0d d3 40 0d d5 60  |......... ..@..`|
        00000340  0d d7 80 0d d9 a0 0d db  c0 0d dd e0 0d df 00 0e  |................|
        00000350  e1 20 0e e3 40 0e e5 60  0e e7 80 0e e9 a0 0e eb  |. ..@..`........|
        00000360  f0 ff ed e0 0e ef 00 0f  f1 20 0f f3 40 0f f5 60  |......... ..@..`|
        00000370  0f f7 80 0f f9 a0 0f fb  c0 0f fd e0 0f ff 00 10  |................|
        00000380  01 21 10 03 41 10 05 61  10 07 81 10 09 a1 10 0b  |.!..A..a........|
        00000390  c1 10 0d e1 10 ff ff ff  11 21 11 13 41 11 15 61  |.........!..A..a|
        000003a0  11 17 81 11 19 a1 11 1b  c1 11 1d e1 11 1f 01 12  |................|
        000003b0  21 21 12 23 41 12 25 61  12 27 81 12 29 a1 12 ff  |!!.#A.%a.'..)...|
        000003c0  cf 12 2d e1 12 2f 01 13  31 21 13 33 41 13 35 61  |..-../..1!.3A.5a|
        000003d0  13 37 81 13 39 a1 13 3b  c1 13 3d e1 13 3f 01 14  |.7..9..;..=..?..|
        000003e0  41 21 14 43 41 14 45 61  14 47 81 14 49 a1 14 4b  |A!.CA.Ea.G..I..K|
        000003f0  c1 14 4d e1 14 4f 01 15  51 21 15 53 41 15 55 61  |..M..O..Q!.SA.Ua|
    \end{hexlsting}

    First sector of the second FAT:
    \begin{hexlsting}
        00001400  f0 ff ff 03 40 00 05 60  00 07 80 00 09 a0 00 0b  |....@..`........|
        00001410  c0 00 0d e0 00 0f 00 01  11 20 01 13 40 01 15 60  |......... ..@..`|
        00001420  01 17 80 01 19 a0 01 1b  c0 01 1d e0 01 1f 00 02  |................|
        00001430  21 20 02 23 40 02 25 60  02 27 80 02 29 a0 02 2b  |! .#@.%`.'..)..+|
        00001440  c0 02 2d e0 02 2f 00 03  31 20 03 33 40 03 35 60  |..-../..1 .3@.5`|
        00001450  03 37 80 03 39 a0 03 3b  c0 03 3d e0 03 3f 00 04  |.7..9..;..=..?..|
        00001460  41 20 04 43 f0 ff 45 60  04 47 80 04 49 a0 04 4b  |A .C..E`.G..I..K|
        00001470  c0 04 4d e0 04 4f 00 05  51 20 05 53 40 05 55 60  |..M..O..Q .S@.U`|
        00001480  05 57 80 05 59 a0 05 5b  c0 05 5d e0 05 5f 00 06  |.W..Y..[..].._..|
        00001490  61 20 06 63 40 06 65 60  06 67 80 06 69 a0 06 6b  |a .c@.e`.g..i..k|
        000014a0  c0 06 6d e0 06 6f 00 07  71 20 07 73 40 07 75 60  |..m..o..q .s@.u`|
        000014b0  07 77 80 07 79 a0 07 7b  c0 07 7d e0 07 7f 00 08  |.w..y..{..}.....|
        000014c0  81 20 08 83 40 08 85 60  08 87 80 08 89 a0 08 8b  |. ..@..`........|
        000014d0  c0 08 8d f0 ff 8f 00 09  91 20 09 93 40 09 95 60  |......... ..@..`|
        000014e0  09 97 80 09 99 a0 09 9b  c0 09 9d e0 09 9f 00 0a  |................|
        000014f0  a1 20 0a a3 40 0a a5 60  0a a7 80 0a a9 a0 0a ab  |. ..@..`........|
        00001500  c0 0a ad e0 0a af 00 0b  b1 20 0b b3 40 0b b5 60  |......... ..@..`|
        00001510  0b b7 80 0b b9 a0 0b bb  c0 0b bd e0 0b bf 00 0c  |................|
        00001520  c1 20 0c c3 40 0c c5 60  0c c7 80 0c c9 a0 0c cb  |. ..@..`........|
        00001530  c0 0c cd e0 0c cf 00 0d  d1 20 0d d3 40 0d d5 60  |......... ..@..`|
        00001540  0d d7 80 0d d9 a0 0d db  c0 0d dd e0 0d df 00 0e  |................|
        00001550  e1 20 0e e3 40 0e e5 60  0e e7 80 0e e9 a0 0e eb  |. ..@..`........|
        00001560  f0 ff ed e0 0e ef 00 0f  f1 20 0f f3 40 0f f5 60  |......... ..@..`|
        00001570  0f f7 80 0f f9 a0 0f fb  c0 0f fd e0 0f ff 00 10  |................|
        00001580  01 21 10 03 41 10 05 61  10 07 81 10 09 a1 10 0b  |.!..A..a........|
        00001590  c1 10 0d e1 10 ff ff ff  11 21 11 13 41 11 15 61  |.........!..A..a|
        000015a0  11 17 81 11 19 a1 11 1b  c1 11 1d e1 11 1f 01 12  |................|
        000015b0  21 21 12 23 41 12 25 61  12 27 81 12 29 a1 12 ff  |!!.#A.%a.'..)...|
        000015c0  cf 12 2d e1 12 2f 01 13  31 21 13 33 41 13 35 61  |..-../..1!.3A.5a|
        000015d0  13 37 81 13 39 a1 13 3b  c1 13 3d e1 13 3f 01 14  |.7..9..;..=..?..|
        000015e0  41 21 14 43 41 14 45 61  14 47 81 14 49 a1 14 4b  |A!.CA.Ea.G..I..K|
        000015f0  c1 14 4d e1 14 4f 01 15  51 21 15 53 41 15 55 61  |..M..O..Q!.SA.Ua|
    \end{hexlsting}

    The contents of both sectors are identical.

    \section{Examine root directory entries using NEW.TXT}\label{sec:verifyfat}

    Sector 20 with NEW.TXT entry highlighted in red:

    \begin{hexlsting}
    00002800  41 54 54 52 49 42 20 20  45 58 45 20 00 00 00 00  |ATTRIB  EXE ....|
    00002810  00 00 00 00 00 00 01 28  6b 17 c3 02 b4 3d 00 00  |.......(k....=..|
    00002820  4c 41 42 45 4c 20 20 20  45 58 45 20 00 00 00 00  |LABEL   EXE ....|
    00002830  00 00 00 00 00 00 01 28  6b 17 e2 02 ae 24 00 00  |.......(k....$..|
    00002840  51 42 41 53 49 43 20 20  48 4c 50 20 00 00 00 00  |QBASIC  HLP ....|
    00002850  00 00 00 00 00 00 01 28  6b 17 f5 02 fa fe 01 00  |.......(k.......|
    00002860  51 42 41 53 49 43 20 20  45 58 45 20 00 00 00 00  |QBASIC  EXE ....|
    00002870  00 00 00 00 00 00 01 28  6b 17 f5 03 4f e3 03 00  |.......(k...O...|
    00002880  42 4f 4f 54 35 30 30 20  20 20 20 28 00 00 00 00  |BOOT500    (....|
    00002890  00 00 00 00 00 00 01 8c  71 27 00 00 00 00 00 00  |........q'......|
    @@000028a0  4e 45 57 20 20 20 20 20  54 58 54 20 00 00 00 00  |NEW     TXT ....|
    000028b0  00 00 00 00 00 00 97 8e  4d 4e e7 05 7f 00 00 00  |........MN......|@@
    000028c0  41 2e 00 66 00 73 00 65  00 76 00 0f 00 da 65 00  |A..f.s.e.v....e.|
    000028d0  6e 00 74 00 73 00 64 00  00 00 00 00 ff ff ff ff  |n.t.s.d.........|
    000028e0  46 53 45 56 45 4e 7e 31  20 20 20 12 00 75 c4 81  |FSEVEN~1   ..u..|
    000028f0  4c 56 4c 56 00 00 c4 81  4c 56 e8 05 00 00 00 00  |LVLV....LV......|
    00002900  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    00002910  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    00002920  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    \end{hexlsting}
    \clearpage

    \begin{table}[h]
        \centering
        \begin{tabular}{|c|c|c|c|}
            \hline
                Byte(s) & Contents & Hex Value & Interpreted Value\\
            \hline
                0-7 & File name &
                     4e 45 57 20 20 20 20 20   &
                     FILE    \\
                8-10 & File Extension &
                    54 58 54 &
                    TXT \\
                11 & Number Attribute Byte &
                     20 00 &
                     00100000 (File has changed) \\
                12-21 & Unused &
                    01  &
                    1 sector/cluster\\
                22-23 & Time &
                    97 8e &
                    8e 97 (see section below) \\
                24-25 & Date &
                    4d 4e &
                     4e 4d (see section below)\\
                26-27 & Number of first cluster &
                    e7 05 &
                    Cluster 1511 \\
                28-31 & Number of bytes in file &
                    7f 00  00  00 &
                    127 bytes \\
            \hline
    \end{tabular}
    \caption{FILE.TXT Dir Entry}
    \label{tab:basic}
    \end{table}

    Date calculation:

    \begin{itemize}
        \item Hex: 4e 4d
        \item Binary: 0100111001001101
        \item Year: 0100111 $\rightarrow 78 \rightarrow 1980 + 78 = 2058$
        \item Month: 0010 $\rightarrow 2 \rightarrow February$
        \item Day : 01101 $\rightarrow 13$
        \item Combined Date: February 13 2058
    \end{itemize}

    Time calculation:
    \begin{itemize}
        \item Hex: 8e 97
        \item Binary: 1000111010010111
        \item Hour: 10001 $\rightarrow 17 \rightarrow 17 - 12 p.m. \rightarrow 5 p.m.$
        \item Minute : 110100 $\rightarrow 52$
        \item Second: 10111 $\rightarrow 23 * 2 \rightarrow 46$
        \item Combined Time: 5:52:46 p.m.
    \end{itemize}

    \section{Examine File Allocation Table structure using NEW.TXT}\label{sec:new_fat}

    \begin{itemize}
        \item Cluster: 1511
        \item FAT Entry Location:
        \begin{itemize}
            \[ \text{Cluster 1511} \rightarrow \text{Coupled with entry 1510} \]
            \[ 1510 \text{ entry } \times \frac{\text{12 bits}}{\text{1 entry}} \times \frac{1 \text{ byte}}{8 \text{ bits}} = 2265 \text{ bytes into the FAT} \]
            \[ \text{FAT is at sector 1} \rightarrow 512 \text{ bytes} + 2265 \text{ bytes} = 2777 \text{ bytes in (location 0xad9)} \]
            \[ \frac{2777}{512} = 5.42 \rightarrow \text{entry is in the fifth sector} \]
             \[ \text{3 byte pair is } \texttt{ff ff ff} \rightarrow \text{unpacked entry pairs for 1510 and 1511 are } \texttt{fff fff} \]
            \[ 1511 \text{ is the entry to the right, but both entries are the same anyway} \]
            \[ \texttt{ff8} - \texttt{fff} \text{ is the terminating cluster range in FAT, so there are no more clusters to trace through. This makes sense given that the size of the file is 127 bytes and a sector is 512 bytes.} \]
        \end{itemize}
    \end{itemize}

    Sector 5 with entries 1510 and 1511 highlighted.
    \[2777~/~512~/~16 = \text{row 13}\]
    \[2777~/~512~\%~16 = \text{column 9}\]


    \begin{hexlsting}
        00000a00  55 57 85 55 59 a5 55 5b  c5 55 5d e5 55 5f 05 56  |UW.UY.U[.U].U_.V|
        00000a10  61 25 56 63 45 56 65 65  56 67 85 56 69 a5 56 6b  |a%VcEVeeVg.Vi.Vk|
        00000a20  c5 56 6d e5 56 6f 05 57  71 25 57 73 45 57 75 65  |.Vm.Vo.Wq%WsEWue|
        00000a30  57 77 85 57 79 a5 57 7b  c5 57 7d e5 57 7f 05 58  |Ww.Wy.W{.W}.W..X|
        00000a40  81 25 58 83 45 58 85 65  58 87 85 58 89 a5 58 8b  |.%X.EX.eX..X..X.|
        00000a50  c5 58 8d e5 58 8f 05 59  91 25 59 93 45 59 95 65  |.X..X..Y.%Y.EY.e|
        00000a60  59 97 85 59 99 a5 59 9b  c5 59 9d e5 59 9f 05 5a  |Y..Y..Y..Y..Y..Z|
        00000a70  a1 25 5a a3 45 5a a5 65  5a a7 85 5a a9 a5 5a ab  |.%Z.EZ.eZ..Z..Z.|
        00000a80  c5 5a ad e5 5a af 05 5b  b1 25 5b b3 45 5b b5 65  |.Z..Z..[.%[.E[.e|
        00000a90  5b b7 85 5b b9 a5 5b bb  c5 5b bd e5 5b bf 05 5c  |[..[..[..[..[..\|
        00000aa0  c1 25 5c c3 45 5c c5 65  5c c7 85 5c c9 a5 5c cb  |.%\.E\.e\..\..\.|
        00000ab0  c5 5c cd e5 5c cf 05 5d  d1 25 5d d3 45 5d d5 65  |.\..\..].%].E].e|
        00000ac0  5d d7 85 5d d9 a5 5d db  c5 5d dd e5 5d df 05 5e  |]..]..]..]..]..^|
        00000ad0  e1 25 5e e3 45 5e e5 65  5e @@ff ff ff@@ ff ff ff ff  |.%^.E^.e^.......|
        00000ae0  ff ff 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000af0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b10  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b20  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b30  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b40  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b50  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b60  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b70  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b80  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000b90  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000ba0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000bb0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000bc0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000bd0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000be0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        00000bf0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    \end{hexlsting}
    \clearpage

    \section{Retrieve NEW.TXT data}\label{sec:new_txt_data}
    Data location: Sector 1511 + 31 offset = Sector 1542
    \\
    \\
    Sector 1542 (NEW.TXT file ASCII contents highlighted in red):

    \begin{hexlsting}
        000c0c00  54 68 69 73 20 69 73 20  61 20 66 69 6c 65 20 6a  @@|This is a file j|@@
        000c0c10  75 73 74 20 63 72 65 61  74 65 64 0d 0a 59 6f 75  @@|ust created..You|@@
        000c0c20  20 63 61 6e 20 75 73 65  20 44 4f 53 20 63 6f 6d  @@| can use DOS com|@@
        000c0c30  6d 61 6e 64 0d 0a 63 6f  70 79 20 63 6f 6e 20 6e  @@|mand..copy con n|@@
        000c0c40  65 77 2e 74 78 74 0d 0a  74 68 65 6e 20 74 79 70  @@|ew.txt..then typ|@@
        000c0c50  65 20 61 6e 64 20 43 74  72 6c 2d 5a 0d 0a 49 74  @@|e and Ctrl-Z..It|@@
        000c0c60  20 77 69 6c 6c 20 73 61  76 65 20 66 72 6f 6d 20  @@| will save from |@@
        000c0c70  73 74 64 69 6e 20 74 6f  20 66 69 6c 65 0d 0a 00  @@|stdin to file...|@@
        000c0c80  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0c90  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0ca0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0cb0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0cc0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0cd0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0ce0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0cf0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d00  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d10  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d20  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d30  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d40  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d50  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d60  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d70  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d80  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0d90  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0da0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0db0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0dc0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0dd0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0de0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
        000c0df0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
    \end{hexlsting}

    \section{Mark your reasoning on data segments}\label{sec:new_fat}

    \begin{hexlsting}
        Disk Segment (A)
        0001 0203 0405 0607 0809 0A0B 0C0D 0E0F - 0123456789ABCDEF
        ----------------------------------------------------------
        2E20 2020 2020 2020 2020 2010 0000 0060 - .          ....`
        8727 8727 0000 0060 8727 0601 0000 0000 - Ã¡'Ã¡'...`Ã¡'......
        2E2E 2020 2020 2020 2020 2010 0000 0060 - ..         ....`
        8727 8727 0000 0060 8727 0900 0000 0000 - Ã¡'Ã¡'...`Ã¡'......
        4E54 444C 4C20 2020 444C 4C00 0000 0060 - NTDLL   DLL....`
        8727 2E2A 0000 0060 8727 F404 1057 0700 - Ã¡'.*...`Ã¡'Ã™..W..
        534D 5353 2020 2020 4558 4500 0000 0060 - SMSS    EXE....`
        8727 2E2A 0000 0060 8727 080A 1053 0200 - Ã¡'.*...`Ã¡'?..S..
        434C 4153 5332 2020 5359 5F00 0000 0060 - CLASS2  SY_....`
        8727 8727 0000 0060 8727 3900 F51D 0000 - Ã¡'Ã¡'...`Ã¡'@.?...

        Disk Segment (B)
        00002600  46 41 54 33 32 20 20 20  20 20 20 08 00 00 00 00  |FAT32      .....|
        00002610  00 00 00 00 00 00 82 0c  f0 2a 00 00 00 00 00 00  |.........*......|
        00002620  47 74 00 78 00 74 00 00  00 ff ff 0f 00 43 ff ff  |Gt.x.t.......C..|
        00002630  ff ff ff ff ff ff ff ff  ff ff 00 00 ff ff ff ff  |................|
        00002640  06 20 00 66 00 69 00 6c  00 65 00 0f 00 43 20 00  |. .f.i.l.e...C .|
        00002650  73 00 79 00 73 00 74 00  65 00 00 00 6d 00 2e 00  |s.y.s.t.e...m...|
        00002660  05 6c 00 75 00 73 00 74  00 72 00 0f 00 43 61 00  |.l.u.s.t.r...Ca.|
        00002670  74 00 65 00 20 00 56 00  46 00 00 00 41 00 54 00  |t.e. .V.F...A.T.|
        00002680  04 6e 00 67 00 20 00 6e  00 61 00 0f 00 43 6d 00  |.n.g. .n.a...Cm.|
        00002690  65 00 20 00 74 00 6f 00  20 00 00 00 69 00 6c 00  |e. .t.o. ...i.l.|
        000026a0  03 20 00 76 00 65 00 72  00 79 00 0f 00 43 20 00  |. .v.e.r.y...C .|
        000026b0  76 00 65 00 72 00 79 00  20 00 00 00 6c 00 6f 00  |v.e.r.y. ...l.o.|
        000026c0  02 74 00 20 00 66 00 69  00 6c 00 0f 00 43 65 00  |.t. .f.i.l...Ce.|
        000026d0  20 00 77 00 69 00 74 00  68 00 00 00 20 00 61 00  | .w.i.t.h... .a.|
        000026e0  01 54 00 68 00 69 00 73  00 20 00 0f 00 43 69 00  |.T.h.i.s. ...Ci.|
        000026f0  73 00 20 00 61 00 20 00  74 00 00 00 65 00 78 00  |s. .a. .t...e.x.|
        00002700  54 48 49 53 49 53 7e 31  54 58 54 20 00 46 88 0c  |THISIS~1TXT .F..|
        00002710  f0 2a f0 2a 00 00 1a 0c  f0 2a 02 00 0e 00 00 00  |.*.*.....*......|
        00002720  42 65 00 64 00 2e 00 74  00 78 00 0f 00 ea 74 00  |Be.d...t.x....t.|
        00002730  00 00 ff ff ff ff ff ff  ff ff 00 00 ff ff ff ff  |................|
        00002740  01 41 00 20 00 73 00 68  00 6f 00 0f 00 ea 72 00  |.A. .s.h.o....r.|
        00002750  74 00 65 00 72 00 20 00  6e 00 00 00 61 00 6d 00  |t.e.r. .n...a.m.|
        00002760  41 53 48 4f 52 54 7e 31  54 58 54 20 00 5c 89 0c  |ASHORT~1TXT .\..|

        Disk Segment (C)
        01 24 40 FF 4F 40 05 F4 FF 07 84 40 09 A4 40 0B
        1C 88 0D E4 40 0F 04 41 11 24 41 13 44 41 15 64
        41 17 84 41 19 A4 41 1B C0 01 10 E4 41 1F 04 42
        02 01 0A 23 44 42 25 64 42 27 04 62 29 A4 42 2B
        C4 42 2D E4 42 2F 04 43 31 24 43 33 44 43 35 64
        43 37 84 43 39 14 02 3B C4 43 3D E4 43 3F 04 05
        41 24 44 43 44 44 45 64 44 47 84 44 49 A4 44 4B
        C4 44 4D E4 44 4F 04 45 51 24 45 53 44 45 55 64
        45 57 84 45 59 A4 45 5B C4 45 5D E4 45 5F 04 46
        61 24 46 63 44 46 65 64 46 67 84 46 69 A4 46 6B
        C4 46 6D E4 46 6F 04 47 71 24 47 73 44 47 75 64
        47 77 84 47 79 A4 47 7B C4 47 7D E4 47 7F 04 48
        81 24 48 83 44 48 85 64 48 87 84 48 89 A4 48 8B
        C4 48 8D E4 48 8F 04 49 91 24 49 93 44 49 95 64
        49 97 84 49 99 A4 49 9B C4 49 9D E4 49 9F 04 4A
        A1 24 4A A3 44 4A A5 64 4A A7 84 4A A9 A4 4A AB
    \end{hexlsting}

    \begin{enumerate}
        \item What is the long file name of ASHORT~1.TXT?
        \begin{itemize}
            \item ``A shorter name.txt'' (contained in 00002740 with sequence number 2 and 00002742 with sequence number 1).
        \end{itemize}
        \item Which logical sector should contain the FAT information of the 2nd sector (beginning from 1) of SMSS.EXE? Give your detailed reasons.
        \begin{itemize}
            \item Bytes 26 and 27 contain $0x080A \rightarrow 0x0A08 = 2568$, so SMSS.EXE is in cluster entry 2568.
            \item $2568 * 12 \text{bits} / 1 \text{entry} * 1 \text{byte} / 8 \text{bits} = \text{3852 bytes into the FAT section}$
            \item $3852 + 512 = \text{byte} 4364 \rightarrow 4364 / 512 = 8.52 \rightarrow \text{sector} 8$
            \item $3852 \% 512 / 16 = \text{row } 16 \text{offset from sector 8}$
            \item $3852 \% 512 \% 16 = \text{column} 12 \text{offset from row 16 in sector 8}$
            \item Thus, logical sector 8 will have the FAT entry that points at the second cluster of SMSS.EXE, which can be found at a row:column offset of 16:12
            \item The duplicate entry will be in sector 8 + 9 = 17 in the second FAT
        \end{itemize}
        \item Assume Disk segment (C) contains the beginning portion of a FAT sector information about CLASS2.SY\textbackslash\_. What is the logical number of the 3rd (starting from 1) data sector of CLASS2.SY\textbackslash\_ (in decimal)? Please provide your detailed reasons.
        \begin{itemize}
            \item Bytes 26 and 27 contain $0x3900 \rightarrow 0x0039 = 57$, so CLASS2.SY\_ starts with cluster 57.
            \item $57 \rightarrow 56 \rightarrow 56 * 12 \text{bits} / 1 \text{entry} * 1 \text{byte} / 8 \text{bits} = \text{84 bytes into the FAT section}$
            \item $84~/~512 + 1= \text{logical sector}~1$
            \item $84~\%~512~/~16 = \text{row }~5~\text{offset from sector 1}$
            \item $84~\%~512~\%~16 = \text{column}~4~\text{offset from row 5 in sector 1}$
            \item offset 5:4 is~$39 14 02 \rightarrow 439 021$
            \item Our entry is odd, so the cluster number is 021
            \item $0x021 \rightarrow 0x020 \rightarrow 0x020 = 32 \rightarrow 32 * 12 / 8 =~\text{48 bytes into the FAT}$
            \item $48~\% 512~/~16 = \text{row}~4~\text{offset from sector 1}$
            \item $48~\% 512~\%~16 = \text{column}~8~\text{offset from row 4 in sector 1}$
            \item offset 4:8 is $31 24 43 \rightarrow 431 432$
            \item Our entry is odd, so the cluster number is 0x432 = 1074
            \item Use data offset of 31: 1074 + 31 = logical sector 1105
        \end{itemize}
        \item Assume that no file/dir ever be deleted, can logical sector 40 be empty? Why?
        \begin{itemize}
            \item Yes, according to FAT logical sector 40 can be empty. It's the 8th data sector - if no files have been written there, it's possible. However, if this is a DOS disk, it is unlikely that DOS wouldn't have a file occupying such a low cluster in the data section.
        \end{itemize}



    \end{enumerate}


\end{document}
